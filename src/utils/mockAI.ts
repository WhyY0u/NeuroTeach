import { LessonPlan } from '../types/Lesson';

export async function generateLessonPlan(
  subject: string,
  topic: string,
  level: string,
  duration: number,
  style: string
): Promise<LessonPlan> {
  // Simulate AI processing time
  await new Promise(resolve => setTimeout(resolve, 2000));

  const plans = {
    mathematics: {
      introduction: `Добро пожаловать на урок математики! Сегодня мы изучаем "${topic}". Этот урок рассчитан на ${duration} минут и подходит для ${level}. Мы начнем с простых концепций и постепенно углубимся в тему.`,
      explanation: `Давайте разберем основные принципы "${topic}". Начнем с определений и основных формул. Рассмотрим пошаговые примеры и научимся применять знания на практике. Важно понимать логику, стоящую за каждым действием.`,
      practice: `Теперь попробуем решить несколько задач вместе. Начнем с простых примеров, затем перейдем к более сложным. Обратите внимание на типичные ошибки и способы их избежать. Не забывайте проверять свои вычисления.`,
      conclusion: `Подведем итоги урока. Мы изучили "${topic}", рассмотрели основные принципы и решили практические задачи. Для закрепления материала рекомендую выполнить дополнительные упражнения дома.`
    },
    history: {
      introduction: `Добро пожаловать на урок истории! Сегодня мы погружаемся в тему "${topic}". За ${duration} минут мы изучим ключевые события, персонажей и их влияние на ход истории.`,
      explanation: `Рассмотрим исторический контекст "${topic}". Изучим причины событий, их хронологию и последствия. Обратим внимание на различные точки зрения историков и первоисточники того времени.`,
      practice: `Проанализируем исторические документы и карты. Обсудим причинно-следственные связи и попробуем поставить себя на место исторических деятелей. Разберем, как события прошлого влияют на современность.`,
      conclusion: `Мы изучили важные аспекты "${topic}" и их значение для понимания истории. Помните, что история помогает нам лучше понимать настоящее и принимать взвешенные решения в будущем.`
    },
    biology: {
      introduction: `Добро пожаловать на урок биологии! Сегодня мы исследуем "${topic}". В течение ${duration} минут мы изучим живые организмы, их структуру и процессы жизнедеятельности.`,
      explanation: `Рассмотрим строение и функции, связанные с "${topic}". Изучим биологические процессы, их механизмы и значение для жизни организмов. Обратим внимание на взаимосвязи в природе.`,
      practice: `Проведем виртуальные эксперименты и наблюдения. Изучим схемы и диаграммы, проанализируем данные исследований. Попробуем применить полученные знания для решения биологических задач.`,
      conclusion: `Мы изучили основы "${topic}" и поняли их роль в биологических системах. Эти знания помогут вам лучше понимать природу и процессы, происходящие в живых организмах.`
    }
  };

  const defaultPlan = {
    introduction: `Добро пожаловать на урок по теме "${topic}"! В течение ${duration} минут мы изучим эту увлекательную тему, подходящую для ${level}.`,
    explanation: `Рассмотрим основные концепции и принципы "${topic}". Изучим теоретические основы и научимся применять их на практике.`,
    practice: `Выполним практические задания и упражнения для закрепления материала. Обсудим различные подходы к решению задач.`,
    conclusion: `Подведем итоги урока и обсудим, как применить полученные знания в реальной жизни. Запланируем дальнейшее изучение темы.`
  };

  return plans[subject as keyof typeof plans] || defaultPlan;
}

export async function generateVideoScript(lessonPlan: LessonPlan): Promise<string> {
  // Simulate AI processing time
  await new Promise(resolve => setTimeout(resolve, 1500));

  return `
ВИДЕО-СЦЕНАРИЙ УРОКА

[ЗАСТАВКА - 0:00-0:05]
Анимация логотипа NeuroTeach
Музыкальная заставка

[ВСТУПЛЕНИЕ - 0:05-0:30]
${lessonPlan.introduction}

[ОСНОВНАЯ ЧАСТЬ - 0:30-2:00]
${lessonPlan.explanation}

[ПРАКТИЧЕСКАЯ ЧАСТЬ - 2:00-3:30]
${lessonPlan.practice}

[ЗАКЛЮЧЕНИЕ - 3:30-4:00]
${lessonPlan.conclusion}

[КОНЦОВКА - 4:00-4:05]
Благодарим за внимание!
Подписывайтесь на NeuroTeach для новых уроков.

ТЕХНИЧЕСКИЕ ЗАМЕТКИ:
- Используйте спокойную фоновую музыку
- Добавьте визуальные элементы и схемы
- Включите интерактивные элементы для удержания внимания
- Общая длительность: около 4 минут
  `;
}